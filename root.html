<!DOCTYPE html>
<html>
<head>
    <title>V2 (iOS)Aware Deeplinks using PageVisibility API</title>
    <script type="text/javascript">
        window.heapReadyCb = window.heapReadyCb || [], window.heap = window.heap || [], heap.load = function (e, t) { window.heap.envId = e, window.heap.clientConfig = t = t || {}, window.heap.clientConfig.shouldFetchServerConfig = !1; var a = document.createElement("script"); a.type = "text/javascript", a.async = !0, a.src = "https://cdn.us.heap-api.com/config/" + e + "/heap_config.js"; var r = document.getElementsByTagName("script")[0]; r.parentNode.insertBefore(a, r); var n = ["init", "startTracking", "stopTracking", "track", "resetIdentity", "identify", "getSessionId", "getUserId", "getIdentity", "addUserProperties", "addEventProperties", "removeEventProperty", "clearEventProperties", "addAccountProperties", "addAdapter", "addTransformer", "addTransformerFn", "onReady", "addPageviewProperties", "removePageviewProperty", "clearPageviewProperties", "trackPageview"], i = function (e) { return function () { var t = Array.prototype.slice.call(arguments, 0); window.heapReadyCb.push({ name: e, fn: function () { heap[e] && heap[e].apply(heap, t) } }) } }; for (var p = 0; p < n.length; p++)heap[n[p]] = i(n[p]) };
        heap.load("2765895291");
    </script>
</head>
<body>

    <script type="text/javascript">
        function redirectToPage() {
            const redirectUrl = 'https://google.com';
            window.location.replace(redirectUrl);
        }

        // const deeplinkUrl = "https://staging.links.getty.artpro.io?deeplink=site/016e9079-0615-b58f-f447-05a98e7c9510/mood/0183e81c-e37e-86a4-4b7c-c8f47ff780a9";
        const deeplinkUrl = "https://m.uber.com/ul/";
        

        // const a = document.createElement('a');
        // a.href = deeplinkUrl;
        // a.target = '_self';
        // document.body.appendChild(a);
        
        // setTimeout(() => {
        //     a.click();
        // }, 5000);
        

        window.open(deeplinkUrl, '_self');
        setTimeout(() => {
            redirectToPage();
        }, 30000);
    </script>

</body>
</html>
