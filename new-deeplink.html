<!DOCTYPE html>
<html>
<head>
    <title>Correct App Link and Fallback URL PageVisibility API For Android</title>
</head>
<body>

   <script language="Javascript" type="text/javascript">
    let deeplink = "whatsapp://send?phone=+919779988030"
    let redirect = "https://play.google.com/store/apps/details?id=com.whatsapp&hl=en&gl=US&pli=1"
   
    let state = false;
    document.addEventListener("visibilitychange", () => {
        if (document.hidden) {
            console.log("hidden")
          state = true;
        } else {
            console.log("visible")
            window.location.replace(redirect);
        }
      });
    console.log("opening deeplink")
    window.open( deeplink, '_self');
    setTimeout(()=>{
        console.log("Trying to open applink")
        if(!state){
            console.log("Opening deeplink")
            window.location.replace(redirect);
        }
    }, 3000);
        
    
    
   </script>
</body>
</html>
