<!DOCTYPE html>
<html>
<head>
    <title>App Link and Fallback URL Example</title>
</head>
<body>
    <script>
        var deeplinkUrl = `whatsapp://send?phone=+919779988030`;
        //variable will check app installed or not
        var change = false;
        var time = new Date()

        var popUp = window.open(deeplinkUrl, '_self');
        if (popUp == null || typeof(popUp)=='undefined') { 	
            console.log("here")
            alert('Please disable your pop-up blocker and click the "Open" link again.'); 
        } 
        else { 	
            console.log("otherwise")
            popUp.focus();
        }

        let cron = setInterval(() => {
        console.log("inside interval")
        if (!change && (new Date() - time) < 4000 ) {
            var redirectUrl = "https://google.com";
            window.location = redirectUrl;
        }
        else if((new Date() - time) > 4000 ){
            clearInterval(cron);
        }
        }, 1000);
        window.location = deeplinkUrl;
        //handle event to check app installed or not
        window.onblur = function () {
            change = true;
        };
        window.onfocus = function(){
            change = false;
        }
    </script>
</body>
</html>
